name: Create GitHub Issues from README

# This workflow can be manually triggered from the GitHub Actions tab
# It will create all 16 issues + 9 labels automatically

on:
  workflow_dispatch:
    inputs:
      confirm:
        description: 'Type "create" to confirm issue creation'
        required: true
        default: ''

permissions:
  issues: write
  contents: read

jobs:
  create-issues:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'
      
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install PyGithub
      
      - name: Validate confirmation
        run: |
          if [ "${{ github.event.inputs.confirm }}" != "create" ]; then
            echo "❌ Confirmation failed. Please type 'create' to confirm."
            exit 1
          fi
          echo "✅ Confirmation validated"
      
      - name: Create GitHub Issues
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GITHUB_REPOSITORY: ${{ github.repository }}
        run: |
          echo "Creating issues for repository: $GITHUB_REPOSITORY"
          python3 create_github_issues.py
      
      - name: Summary
        if: success()
        run: |
          echo "✅ Successfully created all issues!"
          echo ""
          echo "View your issues at:"
          echo "https://github.com/${{ github.repository }}/issues"
